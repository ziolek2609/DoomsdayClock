<html>
  <head>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

      <title>DoomsdayClock</title>
  </head>
  <body>
    <p style="text-align:center;font-size:25px;font-family:Verdana;color:#ffffff;background-color:#a6a6a6;">- - - - - DOOMSDAY WILL COME: {{ edate }} AT {{ etime }}- - - - -</p>
    <hr>
    <div id="zegar"></div> <!---tu jest odlicznik czasu, który jest wstawiany z timer.html i aktualizowany przez js poniżej--->
    <div id="gif",style ="text-align:center"></div>
    <!--skrypt js korzystający z ajax, dzięki czemu możemy przeładować daną część strony bez potrzeby przeładowywania całej, dzięki czemu nasz odlicznik aktualizuje się co sekundę, bez potrzeby przeładowania całej strony-->
    <script>
            var isGifLessThanHourDisplayed = false;
            var isGifLessThanDayDisplayed = false

          window.setInterval(() => {
              $.ajax({
                  url:'/timer',
                  data: {
                      edate: '{{edate}}',
                      etime: '{{etime}}'
                  },
                  type: 'POST',
                  success: function(response){
                      document.getElementById("zegar").innerHTML = response
                  }
              });

              if (3600*24 >= {{ sec }} > 0 && !isGifLessThanDayDisplayed) {
                  isGifLessThanDayDisplayed = true;
                  $.ajax({
                      url: '/gif',
                      data: {
                          gif: "gif2.html"
                      },
                      type: 'POST',
                      success: function (response) {
                          document.getElementById("gif").innerHTML = response
                      }
                  })
              }

              if (3600 >= {{ sec }} > 0 && !isGifLessThanHourDisplayed) {
                  isGifLessThanHourDisplayed = true;
                  $.ajax({
                      url: '/gif',
                      data: {
                          gif: "gif1.html"
                      },
                      type: 'POST',
                      success: function (response) {
                          document.getElementById("gif").innerHTML = response
                      }
                  })
              }
        }, 1000);
        setTimeout(function(){
   document.getElementById('gif').style.display = 'none';
}, 20000);
    </script>
  </body>
</html>
